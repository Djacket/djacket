function highlight_codes(){$(".code-view pre").each(function(t,e){hljs.highlightBlock(e)})}function setup_markdown(){var t=[];if(marked.setOptions({renderer:new marked.Renderer,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),$('table#repo-content tbody tr td.repo-obj-name[type="blob"] a').each(function(){("README.md"==$(this).text().trim()||"README.rst"==$(this).text().trim())&&t.push($(this).attr("href"))}),t.length>0){var e=t[0].split("/")[t[0].split("/").length-1];$.ajax({url:"/api"+t[0].replace(".git/blob/",".git/readme/"),type:"get",success:function(t){$("h2.markdown-title").html('<i class="fa fa-book"></i> '+e),$(".markdown-preview .markdown-title").css("display","block"),$(".markdown-preview .arrow-down").css("display","block"),$(".markdown-preview .markdown-body").html(marked(t))},failure:function(t){console.error("djacket > failed to get README file.")}})}}function process_dates(){$(".moment-date").each(function(){$(this).hasClass("moment-dated")||($(this).text(moment($(this).text()).fromNow()),$(this).addClass("moment-dated"))})}function setup_pjax(){$(document).pjax("a[data-pjax]","#pjax-container"),$(document).on("pjax:start",function(){NProgress.start()}),$(document).on("pjax:end",function(){NProgress.done()})}function setup_view_tabs(){jQuery(".pjax-tabs .tab-links a").on("click",function(t){jQuery(this).attr("href");jQuery(this).parent("li").addClass("active").siblings().removeClass("active")})}function setup_static_tabs(){jQuery(".static-tabs .tab-links a").on("click",function(t){var e=jQuery(this).attr("href");jQuery(".static-tabs "+e).show().siblings().hide(),jQuery(this).parent("li").addClass("active").siblings().removeClass("active"),t.preventDefault()})}function setup_nprogress(){NProgress.configure({showSpinner:!1})}function setup_file_icons(){$("i.obj-icon").each(function(){var t=$(this).attr("ext");$(this).addClass(get_icon(t).icon)})}function _show_weekly_graphs(t){var e=["Monday","Tuesday","Wednsday","Thursday","Friday","Saturday","Sunday"],a=[];t=JSON.parse(t);for(data in t)a.push(t[data]);var s={labels:e,datasets:[{label:"Weekly Commits",fillColor:"rgba(57,221,0,0.2)",strokeColor:"rgba(49,170,8,1)",pointColor:"rgba(26, 103, 0, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(20, 75, 1, 1)",data:a}]},o=$("#repo-graphs #weekly-commits-graph").get(0).getContext("2d");new Chart(o).Line(s)}function _show_monthly_graphs(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=[];t=JSON.parse(t);for(data in t)a.push(t[data]);var s={labels:e,datasets:[{label:"Monthly Commits",fillColor:"rgba(57,221,0,0.2)",strokeColor:"rgba(49,170,8,1)",pointColor:"rgba(26, 103, 0, 1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(20, 75, 1, 1)",data:a}]},o=$("#repo-graphs #monthly-commits-graph").get(0).getContext("2d");new Chart(o).Bar(s)}function show_graphs(t){var e=JSON.parse(""+t).weekly,a=JSON.parse(""+t).monthly;_show_weekly_graphs(e),_show_monthly_graphs(a)}function get_datasets(){var t=$("#repo-graphs");t.length&&$.ajax({url:"/api"+$("#repo-link").attr("href").trim()+"/commits_stats",type:"get",success:function(t){$("#graphs-loader").css("display","none"),show_graphs(t)},failure:function(t){console.error("djacket > failed to get repository graphs.")}})}$(document).on("ready",function(){setup_nprogress(),setup_view_tabs(),setup_static_tabs(),setup_pjax()}),$(document).on("ready pjax:end",function(){highlight_codes(),process_dates(),setup_markdown(),setup_file_icons(),get_datasets()});